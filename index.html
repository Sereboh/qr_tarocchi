<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mystic Tarot</title>
<style>
body{
 background:radial-gradient(circle at top,#130f22,#000);
 color:#f4e7c2;
 font-family:Georgia,serif;
 overflow:hidden;
 margin:0;
 padding:0;
}

h1{
 text-align:center;
 margin:20px 0;
 letter-spacing:2px;
}

#deck{
 position:relative;
 width:100%;
 height:400px;
 margin-top:50px;
}

.card{
 position:absolute;
 width:100px;
 height:150px;
 background:url('back.jpg') center/cover no-repeat;
 border-radius:10px;
 cursor:pointer;
 transition: transform 1s, top 1s, left 1s, opacity 1s;
}

#overlay{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,0.9);
 display:flex;
 align-items:center;
 justify-content:center;
 opacity:0;
 pointer-events:none;
 transition: opacity 0.5s;
}

#overlay.show{
 opacity:1;
 pointer-events:auto;
}

#box{
 background:#111;
 padding:20px;
 border-radius:14px;
 max-width:340px;
 text-align:center;
 transform: scale(0.5) rotate(-15deg);
 transition: transform 0.7s;
}

#overlay.show #box{
 transform: scale(1) rotate(0deg);
}

#box img{
 width:100%;
 border-radius:10px;
}

#title{
 margin-top:10px;
 font-size:22px;
}

#desc{
 margin-top:10px;
}
</style>
</head>
<body>

<h1 id="titleMain">Scegli la tua carta</h1>

<div id="deck"></div>

<div id="overlay" onclick="closeCard()">
  <div id="box" onclick="event.stopPropagation()">
    <img id="imgBig">
    <div id="title"></div>
    <div id="desc"></div>
  </div>
</div>

<audio id="bgmusic" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
const names = [
"Il Matto","Il Mago","La Papessa","L'Imperatrice","L'Imperatore",
"Il Papa","Gli Amanti","Il Carro","La Forza","L'Eremita","La Ruota",
"La Giustizia","L'Appeso","La Morte","La Temperanza","Il Diavolo",
"La Torre","La Stella","La Luna","Il Sole","Il Giudizio","Il Mondo"
];

const namesEN = [
"The Fool","The Magician","The High Priestess","The Empress","The Emperor",
"The Hierophant","The Lovers","The Chariot","Strength","The Hermit",
"Wheel of Fortune","Justice","The Hanged Man","Death","Temperance",
"The Devil","The Tower","The Star","The Moon","The Sun","Judgement","The World"
];

const texts_IT = [
"Il Matto: Nuovi inizi, spontaneità e avventura.",
"Il Mago: Creatività e potere personale.",
"La Papessa: Saggezza e intuizione.",
"L'Imperatrice: Fertilità e abbondanza.",
"L'Imperatore: Stabilità e autorità.",
"Il Papa: Tradizione e guida spirituale.",
"Gli Amanti: Amore e scelte importanti.",
"Il Carro: Determinazione e successo.",
"La Forza: Coraggio e pazienza.",
"L'Eremita: Ricerca interiore e saggezza.",
"La Ruota: Cambiamento e cicli.",
"La Giustizia: Equilibrio e giustizia.",
"L'Appeso: Sacrificio e prospettiva.",
"La Morte: Trasformazione e fine di un ciclo.",
"La Temperanza: Armonia e moderazione.",
"Il Diavolo: Tentazione e dipendenze.",
"La Torre: Rottura e cambiamento improvviso.",
"La Stella: Speranza e ispirazione.",
"La Luna: Intuizione e illusioni.",
"Il Sole: Felicità e successo.",
"Il Giudizio: Rinascita e giudizio.",
"Il Mondo: Completamento e realizzazione."
];

const texts_EN = [
"The Fool: New beginnings, spontaneity, adventure.",
"The Magician: Creativity and personal power.",
"The High Priestess: Wisdom and intuition.",
"The Empress: Fertility and abundance.",
"The Emperor: Stability and authority.",
"The Hierophant: Tradition and spiritual guidance.",
"The Lovers: Love and important choices.",
"The Chariot: Determination and success.",
"Strength: Courage and patience.",
"The Hermit: Inner search and wisdom.",
"Wheel of Fortune: Change and cycles.",
"Justice: Balance and fairness.",
"The Hanged Man: Sacrifice and perspective.",
"Death: Transformation and end of a cycle.",
"Temperance: Harmony and moderation.",
"The Devil: Temptation and addictions.",
"The Tower: Sudden change and disruption.",
"The Star: Hope and inspiration.",
"The Moon: Intuition and illusions.",
"The Sun: Happiness and success.",
"Judgement: Rebirth and assessment.",
"The World: Completion and fulfillment."
];

let lang="it";
const deck=document.getElementById("deck");

// Mescola array
function shuffleArray(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
  return array;
}

// Creazione carte
let indices = [...Array(names.length).keys()];
indices = shuffleArray(indices);

const cards=[];
indices.forEach((i)=>{
  const c=document.createElement("div");
  c.className="card";
  c.dataset.index=i;
  c.style.top="125px";
  c.style.left="50%";
  c.style.transform="translateX(-50%) rotate(0deg)";
  c.style.opacity=0;
  c.onclick=()=>selectCard(c);
  deck.appendChild(c);
  cards.push(c);
});

// Animazione ventaglio
window.onload = ()=>{
  document.getElementById("bgmusic").play().catch(()=>{});
  const spread = 60;
  const centerX = deck.offsetWidth/2;
  const radius = 200;
  cards.forEach((c,idx)=>{
    const angle = (idx/(cards.length-1) - 0.5)*spread; 
    const rad = angle * Math.PI / 180;
    const x = centerX + radius*Math.sin(rad) - 50;
    const y = 125 - radius*(1-Math.cos(rad));
    setTimeout(()=>{
      c.style.left=x+"px";
      c.style.top=y+"px";
      c.style.transform=`rotate(${angle}deg)`;
      c.style.opacity=1;
    }, idx*100);
  });
};

// Selezione carta con effetto sparizione carte rimanenti
function selectCard(card){
  const i = parseInt(card.dataset.index);
  cards.forEach(c=>{
    if(c!==card){
      c.style.opacity=0;
      c.style.transform="scale(0)";
    }
  });
  setTimeout(()=>openCard(i),500);
}

// Overlay con effetto sventolio
function openCard(i){
  const overlay = document.getElementById("overlay");
  overlay.classList.add("show");
  document.getElementById("imgBig").src="img/"+i+"_"+names[i].toLowerCase().replace(/\s/g,"")+".jpg";
  document.getElementById("title").innerText= lang=="it"? names[i]:namesEN[i];
  document.getElementById("desc").innerText= lang=="it"? texts_IT[i]:texts_EN[i];
}

// Chiudi overlay
function closeCard(){
  const overlay = document.getElementById("overlay");
  overlay.classList.remove("show");
}

// Cambio lingua
function setLang(l){
  lang=l;
  document.getElementById("titleMain").innerText= l=="it"?"Scegli la tua carta":"Choose your card";
}
</script>
</body>
</html>
