<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mystic Tarot</title>

<style>
body{
  background:radial-gradient(circle at top,#130f22,#000);
  color:#f4e7c2;
  font-family:Georgia,serif;
  margin:0;
  padding:0;
  overflow-x:hidden;
}

h1{
  text-align:center;
  margin-top:20px;
}

/* Pulsanti */
#controls{
  position:fixed;
  top:10px; right:10px;
  display:flex; gap:10px;
  z-index:1000;
}

button{
  background:#221933;
  color:#f4e7c2;
  border:1px solid #9474c9;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
  font-size:14px;
}

/* Area mazzo â€” TRASPARENTE */
#deck{
  position:relative;
  width:100%;
  height:420px;   /* Altezza ventaglio */
  margin-top:60px;
  background:transparent; /* niente rettangolo! */
}

/* Carte */
.card{
  position:absolute;
  width:100px;
  height:150px;
  background:url('back.jpg') center/cover no-repeat;
  border-radius:10px;
  opacity:0;
  cursor:pointer;
  transition: all 0.8s ease;
}

/* Overlay carta aperta */
#overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.92);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
  transition:opacity 0.4s;
  padding:20px;
}

#overlay.show{
  opacity:1;
  pointer-events:auto;
}

/* Box responsive */
#box{
  background:#111;
  padding:20px;
  border-radius:14px;
  max-width:380px;
  width:100%;
  text-align:center;
  transform:scale(0.6);
  transition:transform 0.4s;
  max-height:90vh;
  overflow-y:auto; /* << testo non tagliato! */
}

#overlay.show #box{
  transform:scale(1);
}

#box img{
  width:100%;
  border-radius:10px;
}

#restart{
  margin-top:15px;
  padding:10px 18px;
  background:#39285a;
  border:1px solid #8f77c9;
}

/* Mobile migliorato */
@media (max-width:600px){
  .card{
    width:80px;
    height:120px;
  }
  #deck{
    height:350px;
  }
}

</style>
</head>
<body>

<h1 id="titleMain">Scegli la tua carta</h1>

<div id="controls">
  <button onclick="toggleMusic()">ðŸŽµ</button>
  <button onclick="setLang('it')">IT</button>
  <button onclick="setLang('en')">EN</button>
</div>

<div id="deck"></div>

<div id="overlay" onclick="closeCard()">
  <div id="box" onclick="event.stopPropagation()">
    <img id="imgBig">
    <div id="title" style="font-size:22px; margin-top:10px;"></div>
    <div id="desc" style="margin-top:10px; line-height:1.3;"></div>
    <button id="restart" onclick="restart(event)">Ricomincia</button>
  </div>
</div>

<audio id="bgmusic" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
let lang="it";
let opened=false;

/* NOMI (IT) */
const names = [
"Il Matto / Masaniello","Il Mago / Virgilio","La Papessa / Sibilla Cumana",
"Lâ€™Imperatrice / Maria Carolina","Lâ€™Imperatore / Federico II","Il Papa / San Gennaro",
"Gli Amanti / Sebeto e Megara","Il Carro / Maradona","La Forza / Femminiello",
"Lâ€™Eremita / Munaciello","La Ruota della Fortuna / Ruota degli Esposti",
"La Giustizia / Maddalena Cerasuolo","Lâ€™Appeso / Maria la Rossa",
"La Morte / Anime Pezzentelle","La Temperanza / Partenope","Il Diavolo / Mammone",
"La Torre / Maschio Angioino","La Stella / Bella â€™Mbriana","La Luna / Janare",
"Il Sole / Pulcinella","Il Giudizio / Vesuvio","Il Mondo / Artisti Napoletani"
];

/* NOMI (EN) */
const namesEN = [
"The Fool","The Magician","The High Priestess","The Empress","The Emperor",
"The Hierophant","The Lovers","The Chariot","Strength","The Hermit",
"Wheel of Fortune","Justice","The Hanged Man","Death","Temperance",
"The Devil","The Tower","The Star","The Moon","The Sun","Judgement","The World"
];

/* DESCRIZIONI IT (le tue, complete) */
const descIT = [
`La carta del Matto rappresenta la spontaneitÃ ...`,
`La carta del Mago rappresenta lâ€™abilitÃ ...`,
`La Papessa rappresenta la saggezza occulta...`,
`Lâ€™Imperatrice rappresenta la fertilitÃ  e lâ€™abbondanza...`,
`Lâ€™Imperatore rappresenta autoritÃ  e potere terreno...`,
`Il Papa rappresenta lâ€™autoritÃ  spirituale...`,
`Gli Amanti rappresentano lâ€™amore e la scelta...`,
`Il Carro rappresenta vittoria e determinazione...`,
`La Forza rappresenta coraggio e dominio interiore...`,
`Lâ€™Eremita rappresenta ricerca interiore e saggezza...`,
`La Ruota della Fortuna rappresenta cambiamento e destino...`,
`La Giustizia rappresenta equilibrio e veritÃ ...`,
`Lâ€™Appeso rappresenta sospensione e sacrificio...`,
`La Morte rappresenta trasformazione e rinascita...`,
`La Temperanza rappresenta armonia e moderazione...`,
`Il Diavolo rappresenta tentazione e dipendenze...`,
`La Torre rappresenta crisi improvvisa e ricostruzione...`,
`La Stella rappresenta speranza e guida spirituale...`,
`La Luna rappresenta mistero e intuizione...`,
`Il Sole rappresenta gioia, successo e vitalitÃ ...`,
`Il Giudizio rappresenta rinascita e resa dei conti...`,
`Il Mondo rappresenta completamento e armonia...`
];

/* DESCRIZIONI EN */
const descEN = [
`The Fool represents freedom, spontaneity and instinct...`,
`The Magician symbolizes creativity and mastery...`,
`The High Priestess represents intuition and hidden knowledge...`,
`The Empress embodies abundance and nurturing power...`,
`The Emperor symbolizes authority and stability...`,
`The Hierophant represents spiritual guidance...`,
`The Lovers represent union, harmony and choice...`,
`The Chariot symbolizes victory and determination...`,
`Strength represents courage and inner mastery...`,
`The Hermit symbolizes introspection and wisdom...`,
`Wheel of Fortune represents life cycles and change...`,
`Justice represents truth and fairness...`,
`The Hanged Man represents sacrifice and new perspective...`,
`Death symbolizes transformation and rebirth...`,
`Temperance represents balance and moderation...`,
`The Devil symbolizes temptation and inner shadows...`,
`The Tower means sudden change and upheaval...`,
`The Star represents hope and inspiration...`,
`The Moon symbolizes mystery and intuition...`,
`The Sun represents joy, vitality and success...`,
`Judgement symbolizes awakening and renewal...`,
`The World represents completion and fulfillment...`
];

const deck=document.getElementById("deck");
let cards=[];

/* MAZZO CHIUSO */
function createClosedDeck(){
  deck.innerHTML="";
  cards=[];
  opened=false;

  const stack = document.createElement("div");
  stack.className="card";
  stack.style.top="135px";
  stack.style.left="50%";
  stack.style.transform="translateX(-50%)";
  stack.style.opacity=1;
  stack.onclick=openDeck;

  deck.appendChild(stack);
}

/* APRE IL MAZZO */
function openDeck(){
  if(opened) return;
  opened=true;

  deck.innerHTML="";
  let indices=[...Array(22).keys()];

  indices.forEach(i=>{
    const c=document.createElement("div");
    c.className="card";
    c.dataset.index=i;
    c.style.top="135px";
    c.style.left="50%";
    c.style.transform="translateX(-50%)";
    deck.appendChild(c);
    cards.push(c);
    c.onclick=()=>selectCard(c);
  });

  setTimeout(spreadCards,200);
}

/* VENTAGLIO REALISTICO â€” effetto carte in mano */
function spreadCards(){
  const cx = deck.offsetWidth / 2;
  const baseY = 240;
  const spreadDeg = 40;
  const lift = 10;
  const stepX = 16;

  const mid = (cards.length - 1) / 2;

  cards.forEach((c, idx)=>{
    const d = idx - mid;

    const angle = d * (spreadDeg / mid);
    const x = cx + d * stepX - 50;
    const y = baseY - Math.abs(d) * lift;

    setTimeout(()=>{
      c.style.left = x+"px";
      c.style.top = y+"px";
      c.style.opacity=1;
      c.style.transform = `rotate(${angle}deg)`;
    }, idx * 60);
  });
}

/* CLICK CARTA */
function selectCard(card){
  const i=parseInt(card.dataset.index);
  cards.forEach(c=>{
    if(c!==card){
      c.style.opacity=0;
      c.style.transform="scale(0.2)";
    }
  });

  setTimeout(()=>openCard(i),400);
}

/* APRE OVERLAY */
function openCard(i){
  document.getElementById("overlay").classList.add("show");

  const file = i + "_" + names[i].split("/")[0].trim().toLowerCase().replace(/\s+/g,"") + ".jpg";
  document.getElementById("imgBig").src="img/"+file;

  document.getElementById("title").innerText = lang=="it" ? names[i] : namesEN[i];
  document.getElementById("desc").innerText  = lang=="it" ? descIT[i] : descEN[i];
}

function closeCard(){
  document.getElementById("overlay").classList.remove("show");
}

function restart(e){
  e.stopPropagation();
  closeCard();
  setTimeout(createClosedDeck,400);
}

/* MUSICA */
function toggleMusic(){
  const m=document.getElementById("bgmusic");
  if(m.paused) m.play(); else m.pause();
}

/* LINGUA */
function setLang(l){
  lang=l;
  document.getElementById("titleMain").innerText = l=="it" ? "Scegli la tua carta" : "Choose your card";
}

/* START */
createClosedDeck();

</script>
</body>
</html>
