<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mystic Tarot</title>
<style>
:root{
  --fg:#f4e7c2;
  --bg1:#130f22;
  --bg2:#000;
  --card-w:110px;
  --card-h:160px;
}
html,body{height:100%;margin:0;font-family:Georgia,serif;color:var(--fg);
  background: radial-gradient(circle at top,var(--bg1),var(--bg2));
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
  overflow-x:hidden;
}
header{
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:12px 18px;
}
header .top-row{
  display:flex;
  justify-content:center;
  gap:8px;
  margin-top:8px;
}
h1{margin:0;font-size:20px;letter-spacing:2px;text-align:center;}
button.ctrl{
  background:rgba(34,25,51,0.55);
  color:var(--fg);
  border:1px solid rgba(147,116,201,0.22);
  padding:8px 12px;border-radius:10px;
  cursor:pointer;font-size:14px;
  backdrop-filter: blur(4px);
}
#deck{
  position:relative;
  width:100%;
  height:calc(100vh - 80px); /* lascia spazio header */
  display:flex;
  align-items:center;
  justify-content:center;
  perspective:1400px;
  -webkit-tap-highlight-color: transparent;
}
.card{
  position:absolute;
  width:var(--card-w);
  height:var(--card-h);
  border-radius:10px;
  background-size:cover;
  background-position:center;
  transform-origin:center bottom;
  cursor:pointer;
  opacity:0;
  transition: transform .72s cubic-bezier(.2,.9,.3,1), left .72s ease, top .72s ease, opacity .28s;
  box-shadow: 0 14px 36px rgba(0,0,0,0.6);
  border:2px solid rgba(0,0,0,0.12);
  overflow:hidden;
}
.card.glow{ filter: drop-shadow(0 0 14px rgba(147,116,201,0.32)); }
.card:hover{
  transform: translateY(-10px) scale(1.06);
  z-index:3000;
  box-shadow: 0 28px 56px rgba(0,0,0,0.7);
}
.stack-card{ transition: transform .9s ease, opacity .5s; }
.stack-pulse{ animation: breathe 2.6s infinite; transform-origin:center; }
@keyframes breathe{
  0%{ transform: translateX(-50%) translateY(-50%) rotate(0deg) scale(1) }
  50%{ transform: translateX(-50%) translateY(-54%) rotate(0deg) scale(1.022) }
  100%{ transform: translateX(-50%) translateY(-50%) rotate(0deg) scale(1) }
}
.shake{ animation: shakeit .42s cubic-bezier(.4,0,.2,1); transform-origin:center; }
@keyframes shakeit{
  0%{ transform: translateX(-50%) rotate(0deg) }
  25%{ transform: translateX(calc(-50% + 6px)) rotate(-1.6deg) }
  50%{ transform: translateX(calc(-50% - 6px)) rotate(1.6deg) }
  75%{ transform: translateX(calc(-50% + 3px)) rotate(-0.8deg) }
  100%{ transform: translateX(-50%) rotate(0deg) }
}
#overlay{
  position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
  background: linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.8));
  opacity:0;pointer-events:none;transition:opacity .28s ease;
  padding:18px;
}
#overlay.show{ opacity:1; pointer-events:auto; }
#box{
  width:100%;max-width:520px;background:linear-gradient(180deg,#0f0f10,#111111);
  border-radius:12px;padding:18px;box-shadow:0 20px 66px rgba(0,0,0,0.7);
  max-height:92vh;overflow:auto;transform-origin:center;transition:transform .32s cubic-bezier(.2,.9,.3,1);
}
#box img{width:100%;border-radius:8px;display:block}
#title{margin-top:12px;font-size:20px;text-align:center}
#desc{margin-top:10px;line-height:1.45;color:#e8dfc6;text-align:justify}
#restart{margin-top:14px;padding:10px 14px;border-radius:10px;background:#2b1f3a;border:1px solid rgba(147,116,201,0.18);color:var(--fg);cursor:pointer}

@media (max-width:640px){
  :root{ --card-w:88px; --card-h:128px }
  header{padding:8px;}
  header h1{font-size:18px;margin-bottom:6px;}
  #box{max-width:94%}
  #deck{height:calc(100vh - 100px);}
}
</style>
</head>
<body>
<header>
  <h1 id="titleMain">Clicca il mazzo per aprire</h1>
  <div class="top-row controls">
    <button class="ctrl" id="musicBtn">ðŸŽµ Play</button>
    <button class="ctrl" id="langIt">IT</button>
    <button class="ctrl" id="langEn">EN</button>
  </div>
</header>

<div id="deck" aria-label="Mazzo di carte"></div>

<div id="overlay" onclick="closeCard()">
  <div id="box" onclick="event.stopPropagation()">
    <img id="imgBig" alt="">
    <div id="title"></div>
    <div id="desc"></div>
    <div style="text-align:center">
      <button id="restart">Torna al mazzo</button>
    </div>
  </div>
</div>

<audio id="bgmusic" loop preload="none"><source src="music.mp3" type="audio/mpeg"></audio>

<script>
/* -------- DATA -------- */
const namesIT = [
"Il Matto / Masaniello","Il Mago / Virgilio","La Papessa / Sibilla Cumana",
"Lâ€™Imperatrice / Maria Carolina","Lâ€™Imperatore / Federico II","Il Papa / San Gennaro",
"Gli Amanti / Sebeto e Megara","Il Carro / Maradona","La Forza / Femminiello",
"Lâ€™Eremita / Munaciello","La Ruota della Fortuna / Ruota degli Esposti",
"La Giustizia / Maddalena Cerasuolo","Lâ€™Appeso / Maria la Rossa",
"La Morte / Anime Pezzentelle","La Temperanza / Partenope","Il Diavolo / Mammone",
"La Torre / Maschio Angioino","La Stella / Bella â€™Mbriana","La Luna / Janare",
"Il Sole / Pulcinella","Il Giudizio / Vesuvio","Il Mondo / Artisti Napoletani"
];

const namesEN = [
"The Fool","The Magician","The High Priestess","The Empress","The Emperor",
"The Hierophant","The Lovers","The Chariot","Strength","The Hermit",
"Wheel of Fortune","Justice","The Hanged Man","Death","Temperance",
"The Devil","The Tower","The Star","The Moon","The Sun","Judgement","The World"
];

const descIT = [
"Il Matto / Masaniello â€” La carta del Matto rappresenta la spontaneitÃ , lâ€™ingenuitÃ  e la libertÃ . Ãˆ una figura che agisce senza pregiudizi, spesso in modo impulsivo e senza calcolare i rischi. Il Matto Ã¨ fuori dagli schemi, viaggia senza meta, fiducioso nel suo istinto, ma vulnerabile ai pericoli della strada e pronto a farsi travolgere dal suo stesso caos interiore.",
"Il Mago / Virgilio â€” La carta del Mago rappresenta lâ€™abilitÃ , il potere creativo e la padronanza degli strumenti necessari per trasformare la realtÃ . Il Mago Ã¨ colui che sa agire con intelligenza, sfruttando le risorse a sua disposizione per raggiungere i propri obiettivi.",
"La Papessa / Sibilla Cumana â€” La carta della Papessa rappresenta la saggezza occulta, lâ€™intuizione e la conoscenza spirituale nascosta. Ãˆ una figura misteriosa e femminile, legata alla dimensione interiore. Simboleggia la comprensione profonda dei misteri della vita e la connessione con il divino, spesso celata sotto un velo di segreti o di silenzio.",
"Lâ€™Imperatrice / Maria Carolina â€” La carta dellâ€™Imperatrice rappresenta la fertilitÃ , lâ€™abbondanza e il potere creativo. Ãˆ simbolo di femminilitÃ , maternitÃ  e crescita, legata alla natura e al ciclo vitale. Lâ€™Imperatrice Ã¨ una figura che incarna la prosperitÃ  e la capacitÃ  di governare con dolcezza, ma anche con autoritÃ .",
"Lâ€™Imperatore / Federico II â€” La carta dellâ€™Imperatore rappresenta lâ€™autoritÃ  e il potere terreno. Ãˆ una figura maschile forte, responsabile e razionale, in grado di portare stabilitÃ .",
"Il Papa / San Gennaro â€” La carta del Papa rappresenta lâ€™autoritÃ  spirituale, la saggezza, la guida morale e la mediazione tra il divino e lâ€™umano.",
"Gli Amanti / Sebeto e Megara â€” La carta degli Amanti rappresenta lâ€™amore, lâ€™unione e la scelta. Simboleggia lâ€™attrazione, lâ€™armonia e lâ€™equilibrio tra opposti, ma anche la necessitÃ  di prendere decisioni che possono cambiare il corso della vita.",
"Il Carro / Maradona â€” La carta del Carro rappresenta vittoria, determinazione e controllo. Simboleggia il successo ottenuto attraverso la forza di volontÃ , la disciplina e la capacitÃ  di superare gli ostacoli.",
"La Forza / Femminiello â€” La carta della Forza rappresenta il coraggio, la determinazione e la capacitÃ  di domare le proprie emozioni e istinti, attraverso la calma e la pazienza, piuttosto che con la violenza. Simboleggia il dominio interiore e la tenacia.",
"Lâ€™Eremita / Munaciello â€” La carta dellâ€™Eremita rappresenta la ricerca interiore, la solitudine volontaria, la saggezza acquisita attraverso lâ€™esperienza e la riflessione. Una figura che si isola per trovare risposte e illuminare il proprio cammino.",
"La Ruota della Fortuna / Ruota degli Esposti â€” La carta della Ruota della Fortuna rappresenta il ciclo della vita, il cambiamento e lâ€™imprevedibilitÃ  del destino. Simboleggia i flussi e riflussi della sorte, lâ€™alternarsi di momenti favorevoli e sfavorevoli, e la necessitÃ  di adattarsi al continuo movimento della vita.",
"La Giustizia / Maddalena Cerasuolo â€” La carta della Giustizia rappresenta equilibrio, veritÃ  e imparzialitÃ . Simboleggia lâ€™azione equa, la responsabilitÃ  e la necessitÃ  di agire con correttezza e rettitudine.",
"Lâ€™Appeso / Maria la Rossa â€” La carta dellâ€™Appeso nei tarocchi rappresenta una sospensione temporanea, una pausa forzata e un cambio di prospettiva. Simboleggia il sacrificio, lâ€™abbandono del controllo e la riflessione interiore.",
"La Morte / Anime Pezzentelle â€” La carta della Morte nei tarocchi simboleggia trasformazione, cambiamento radicale e fine di un ciclo. Sebbene spesso temuta, non rappresenta necessariamente la morte fisica, ma piuttosto la fine di una fase, il distacco dal passato e lâ€™opportunitÃ  di rinascita e rinnovamento.",
"La Temperanza / Partenope â€” La carta della Temperanza rappresenta lâ€™armonia, la moderazione, la capacitÃ  di fondere opposti per creare unitÃ .",
"Il Diavolo / Mammone â€” La carta del Diavolo rappresenta tentazione, schiavitÃ¹, desideri materiali o comportamenti nocivi. Simboleggia lâ€™oscuritÃ  interiore, la manipolazione e la perdita del controllo, ma anche la possibilitÃ  di liberarsi da ciÃ² che ci tiene imprigionati, poichÃ© invita a confrontarsi con le proprie ombre e a superare paure ed ossessioni.",
"La Torre / Maschio Angioino â€” La carta della Torre rappresenta distruzione improvvisa, crisi e cambiamenti drammatici. Simboleggia lâ€™abbattimento di strutture consolidate, sia fisiche che emotive, e la necessitÃ  di ricostruzione dopo un crollo.",
"La Stella / Bella â€™Mbriana â€” La carta della Stella rappresenta speranza, guida spirituale e rinnovamento. Un momento di serenitÃ  dopo il caos, un faro di luce che indica una via verso la guarigione e lâ€™armonia. Ãˆ una carta di ispirazione, bellezza e fiducia nel futuro.",
"La Luna / Janare â€” La carta della Luna rappresenta lâ€™inconscio, lâ€™intuizione e i misteri nascosti. Richiama illusioni, inganni e paure, simboleggiando il lato oscuro della psiche e i cicli della natura.",
"Il Sole / Pulcinella â€” La carta del Sole rappresenta gioia, vitalitÃ  e successo, simboleggiando chiarezza e realizzazione personale. Porta ottimismo e soddisfazione, illuminando le ombre e favorendo la crescita e il rinnovamento.",
"Il Giudizio / Vesuvio â€” La carta del Giudizio rappresenta la resa dei conti e la rinascita. Ãˆ una carta che indica risveglio e riflessione, dove si fa il bilancio delle proprie scelte e azioni, e ci si prepara ad un nuovo inizio.",
"Il Mondo / Artisti Napoletani â€” La carta del Mondo rappresenta il completamento, lâ€™armonia e il successo totale. Simboleggia la realizzazione dei propri obiettivi e la celebrazione della pienezza e dellâ€™equilibrio raggiunti."
];

const descEN = [
"The Fool / Masaniello â€” The Fool stands for spontaneity, naivety and freedom.",
"The Magician / Virgilio â€” The Magician symbolizes skill, creative power and mastery of tools.",
"The High Priestess / Sibilla Cumana â€” The High Priestess represents hidden wisdom and intuition.",
"The Empress / Maria Carolina â€” The Empress stands for fertility, abundance and nurturing power.",
"The Emperor / Federico II â€” The Emperor symbolizes authority and stable leadership.",
"The Hierophant / San Gennaro â€” The Hierophant represents spiritual authority and guidance.",
"The Lovers / Sebeto e Megara â€” The Lovers represent love, union and important choices.",
"The Chariot / Maradona â€” The Chariot symbolizes victory, determination and control.",
"Strength / Femminiello â€” Strength represents courage and inner mastery.",
"The Hermit / Munaciello â€” The Hermit symbolizes introspection and wisdom.",
"Wheel of Fortune / Ruota degli Esposti â€” The Wheel symbolizes life's cycles and change.",
"Justice / Maddalena Cerasuolo â€” Justice represents fairness and truth.",
"The Hanged Man / Maria la Rossa â€” The Hanged Man stands for suspension and new perspective.",
"Death / Anime Pezzentelle â€” Death symbolizes transformation and the end of a cycle.",
"Temperance / Partenope â€” Temperance represents balance and harmony.",
"The Devil / Mammone â€” The Devil symbolizes temptation and inner shadows.",
"The Tower / Maschio Angioino â€” The Tower stands for sudden change and rebuilding.",
"The Star / Bella â€™Mbriana â€” The Star represents hope and inspiration.",
"The Moon / Janare â€” The Moon stands for intuition and hidden mysteries.",
"The Sun / Pulcinella â€” The Sun symbolizes joy, vitality and success.",
"Judgement / Vesuvio â€” Judgement symbolizes rebirth and reckoning.",
"The World / Artisti Napoletani â€” The World stands for completion and fulfillment."
];

/* -------- ELEMENTS & STATE -------- */
const deckEl = document.getElementById('deck');
const overlay = document.getElementById('overlay');
const imgBig = document.getElementById('imgBig');
const titleEl = document.getElementById('title');
const descEl = document.getElementById('desc');
const titleMain = document.getElementById('titleMain');
const musicBtn = document.getElementById('musicBtn');
const langIt = document.getElementById('langIt');
const langEn = document.getElementById('langEn');
const restartBtn = document.getElementById('restart');
const bg = document.getElementById('bgmusic');

let cards = [];
let lang = 'it';
let opened = false;

/* helper */
function slugFromName(name){
  let base = name.split('/')[0].trim().toLowerCase();
  base = base.normalize('NFD').replace(/[\u0300-\u036f]/g,'');
  base = base.replace(/[^a-z0-9]+/g,'');
  return base;
}
function getCardW(){ return parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--card-w')) || 110; }
function getCardH(){ return parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--card-h')) || 160; }

/* ------------------- CREA MAZZO CHIUSO ------------------- */
function createClosedDeck(){
  deckEl.innerHTML=''; cards=[]; opened=false;
  const pivotY = window.innerHeight/2;
  for(let i=0;i<namesIT.length;i++){
    const c = document.createElement('div');
    c.className='card stack-card stack-pulse';
    c.style.backgroundImage=`url(images/${slugFromName(namesIT[i])}.jpg)`;
    c.style.left=`50%`;
    c.style.top=`${pivotY - getCardH()/2}px`;
    c.style.opacity=1;
    c.onclick = ()=>openCard(i);
    deckEl.appendChild(c);
    cards.push(c);
  }
}

/* ------------------- APERTURA MAZZO ------------------- */
function openCard(idx){
  opened=true;
  const c = cards[idx];
  c.style.zIndex=9999;
  overlay.classList.add('show');
  imgBig.src=`images/${slugFromName(namesIT[idx])}.jpg`;
  titleEl.textContent = (lang==='it'?namesIT[idx]:namesEN[idx]);
  descEl.textContent = (lang==='it'?descIT[idx]:descEN[idx]);
}

/* ------------------- CHIUSURA ------------------- */
function closeCard(){
  overlay.classList.remove('show');
  cards.forEach((c,i)=>{ c.style.zIndex=10+i; });
}

/* ------------------- EVENTI ------------------- */
restartBtn.onclick = ()=>{ closeCard(); };
musicBtn.onclick = ()=>{
  if(bg.paused){ bg.play(); musicBtn.textContent='ðŸŽµ Pause';}
  else { bg.pause(); musicBtn.textContent='ðŸŽµ Play';}
};
langIt.onclick = ()=>{ lang='it'; };
langEn.onclick = ()=>{ lang='en'; };

/* ------------------- INIT ------------------- */
window.addEventListener('resize',()=>{ if(!opened) createClosedDeck(); });
createClosedDeck();
</script>
</body>
</html>
